<!DOCTYPE html>
<html lang="en-US" ng-app="WhichJSFramework">
<head>
	<title>Which JS Framework</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>
    <script type="text/javascript">
        var matrixCellsArray = [{
            text: 'Interface Elements',
            threeTilesPerLine: true,
            categories: {
                'basic.widgets': {
                    title: 'Basic Widgets',
                    text: 'buttons, text & number fields...'
                },
                'compound.widgets': {
                    title: 'Compound Widgets',
                    text: 'trees, grids, calendar...'
                },
                'visualizations': {
                    title: 'Visualizations',
                    text: 'charts, infographics'
                },
                'containers': {
                    title: 'Containers',
                    text: 'cards, tab panels, windows...'
                },
                'themes': {
                    title: 'Themes'
                },
                'styles': {
                    title: 'Styles'
                }
            }
        },{
            text: 'View System',
            categories: {
                'layout.system': {
                    title: 'Layout System',
                    text: 'absolute, flexible'
                },
                'interactions': {
                    title: 'Interactions',
                    text: 'gestures, drag & drop'
                },
                'drawing': {
                    title: 'Drawing',
                    text: 'vector, bitmap'
                },
                'css.generation': {
                    title: 'Theming',
                    text: 'computed styles'
                },
                'templating': {
                    title: 'Templating',
                    text: 'iterations, conditionals'
                },
                'visual.effects': {
                    title: 'Visual Effects',
                    text: 'animations, filters...'
                },
                'localization': {
                    title: 'Localization',
                    text: 'RTL, locale libraries'
                },
                'accessibility': {
                    title: 'Accessibility',
                    text: 'focus manager, ARIA'
                }
            }
        },{
            text: 'Logic & Data',
            categories: {
                'routes': {
                    title: 'State Manager',
                    text: 'history, undo, routes...'
                },
                'data.binding': {
                    title: 'Data Binding',
                    text: '1-way, 2-way'
                },
                'modularity': {
                    title: 'Modularity',
                    text: 'MVC, MVVM'
                },
                'events': {
                    title: 'Event System',
                    text: 'views, models, generic...'
                },
                'data': {
                    title: 'Data Objects', // huh something different here?
                    text: 'collections, queues'
                },
                'stores': {
                    title: 'Datal Models & Stores',
                    text: ' group, sort, validate'
                },
                'persistence': {
                    title: 'Persistent Data',
                    text: 'web storage, cache'
                },
                'multimedia': {
                    title: 'Multimedia',
                    text: '3D, audio, video'
                }
            }
        },{
            text: 'Server I/O',
            categories: {
                'xhr': {
                    title: 'Server Calls',
                    text: 'async, conversion'
                },
                'rpc': {
                    title: 'Server Method Invocation'
                },
                'bidata': {
                    title: '2-Way Data',
                },
                'push.notifications': {
                    title: 'Server Notifications'
                }
            }
        },{
            text: 'DevTest & DevOps',
            categories: {
                'qa': {
                    title: 'Testing',
                    text: 'dev, qa, browser farms'
                },
                'ci': {
                    title: 'Build & CI Tools',
                    text: 'minification, dev mode'
                },
                'code.sharing': {
                    title: 'Code Sharing',
                    text: 'workspace, packages'
                },
                'dev': {
                    title: 'Dev Productivity',
                    text: 'watches, IDEs'
                }
            }
        }];
        
        var frameworksArray = [{
            name: 'Pre-HTML5',
            changeCells: {
                'basic.widgets': { support: 'partial' },
                'styles': { support: 'full' },
                'layout.system': { support: 'partial'}
            }
        },{
            name: 'HTML5',
            changeCells: {
                'basic.widgets': {
                    support: 'full',
                    title: '',
                    text: 'Range, Color Picker, Date/Time, Progress, Telephone...'
                },
                'styles': {
                    support: 'full',
                    title: 'Gradients, Border Radius'
                },
                'layout.system': {
                    support: 'full',
                    title: 'Flexbox, Multicolumn',
                    text: ''
                },
                'interactions': {
                    support: 'partial',
                    title: 'Drag & Drop',
                    text: ''
                },
                'drawing': {
                    support: 'full',
                    title: 'SVG, Canvas',
                    text: ''
                },
                'visual.effects': {
                    support: 'full',
                    title: 'CSS Animations & Filters',
                    text: ''
                },
                'accessibility': {
                    support: 'full',
                    title: 'WAI-ARIA',
                    text: ''
                },
                'routes': {
                    support: 'full',
                    title: 'History Push State',
                    text: ''
                },
                'persistence': {
                    support: 'full',
                    title: '',
                    text: 'Local Storage, Indexed DB, App-cache'
                },
                'multimedia': {
                    support: 'full',
                    title: '',
                    text: 'Video, Audio, WebGL'
                }
            }
        },{
            name: 'Bootstrap',
            changeCells: {
                'basic.widgets': { support: 'full' },
                'containers': { support: 'full' },
                'themes': { support: 'full' },
                'styles': { support: 'full' },
                'layout.system': { support: 'partial', text: 'responsive grid' },
                'css.generation': { support: 'full' },
                'visual.effects': { support: 'partial' }
            }
        },{
            name: 'AngularJS',
            changeCells: {
                'templating': { support: 'full' },
                'routes': { support: 'partial', text: 'routes' },
                'data.binding': { support: 'full' },
                'modularity': { support: 'partial', text: 'MVC' },
                'events': { support: 'full' },
                'stores': { support: 'partial' },
                'qa': { support: 'full' }
            }
        },{
            name: 'Backbone',
            changeCells: {
                'routes': { support: 'partial', text: '' },
                'data': { support: 'partial' },
                'stores': { support: 'partial' },
                'xhr': { support: 'full' }
            }
        },{
            name: 'jQuery + jQueryUI',
            changeCells: {
                'basic.widgets': { support: 'full' },
                'compound.widgets': { support: 'partial' },
                'containers': { support: 'full' },
                'themes': { support: 'full' },
                'styles': { support: 'partial' },
                'interactions': { support: 'partial', title: 'Drag & Drop', text: '' },
                'css.generation': { support: 'partial' },
                'visual.effects': { support: 'partial' },
                'localization': { support: 'partial' },
                'accessibility': { support: 'partial' },
                'xhr': { support: 'partial' }
            }
        },{
            name: 'Ember',
            changeCells: {
                'templating': { support: 'full' },
                'routes': { support: 'partial' },
                'data.binding': { support: 'full' },
                'modularity': { support: 'partial', text: 'MVC' },
                'stores': { support: 'partial' }
            }
        },{
            name: 'React',
            changeCells: {
                'templating': { support: 'full' },
                'data.binding': { support: 'full' },
                'modularity': { support: 'partial' },
                'events': { support: 'partial' },
                'qa': { support: 'full' }
            }
        }];
        
        function deepCloneArray(arr) {
            return JSON.parse(JSON.stringify(arr));
        }
        
        // merge the matrix cells with frameworks for a final data structure to be rendered
        var matrix = [];
        for (var i = 0; i < frameworksArray.length; i++) {
            var framework = frameworksArray[i];
            matrix.push(framework);
            framework.categories = deepCloneArray(matrixCellsArray);
            for (var changedCell in framework.changeCells) {
                for (var j = 0; j < framework.categories.length; j++) {
                    var topCategory = framework.categories[j];
                    if (topCategory.categories[changedCell]) {
                        topCategory.categories[changedCell].support = framework.changeCells[changedCell].support;
                        if (framework.changeCells[changedCell].hasOwnProperty('title')) topCategory.categories[changedCell].title = framework.changeCells[changedCell].title;
                        if (framework.changeCells[changedCell].hasOwnProperty('text')) topCategory.categories[changedCell].text = framework.changeCells[changedCell].text;
                    }
                }
            }
        }
        console.log(matrix);
    
        var app = angular.module('WhichJSFramework', []);
        var ctl = app.controller('Main', function ($scope) {
            $scope.matrix = matrix;
        });
        
    </script>
    <style type="text/css">
        body { background: gray; color: white; font-family: arial; font-size: 12px; }
        .search { font-size: 15px; text-shadow: cornflowerblue 1px 1px; font-weight: bold; }
        .framework-name { padding: 10px; font-size: 20px; font-weight: bold; text-shadow: red 1px 1px; }
        .top-category { background: white; padding: 10px; }
        .top-category-text { display: inline-block; width: 150px; font-weight: bold; font-size: 150%; color: black; padding: 10px; }
        .sub-categories { display: inline-block; width: 800px; }
        .sub-category { display: inline-block; width: 170px; height: 40px; vertical-align: middle; background: gray; padding: 5px; margin: 2px; text-align: center; }
        .top-category.threeTilesPerLine .sub-category { width: 231px; }
        .sub-category.support-full { background: green; }
        .sub-category.support-partial { background: linear-gradient(135deg, #ffffff 0%,#007c08 100%); }
        .sub-category-wrap { display: flex; flex-direction: column; justify-content: center; height: 100% }
    </style>
</head>
<body ng-controller="Main">

<label class="search">Search: <input ng-model="search"></label>

<div ng-repeat="framework in matrix | filter:{name: search}">
    <div class="framework-name">{{framework.name}}</div>
    <div ng-repeat="topCategory in framework.categories" class="top-category" ng-class="{threeTilesPerLine: topCategory.threeTilesPerLine}">
        <div class="top-category-text">{{topCategory.text}}</div>
        <div class="sub-categories">
            <div ng-repeat="subCategory in topCategory.categories" class="sub-category" ng-class="{'support-full': subCategory.support=='full', 'support-partial': subCategory.support=='partial'}">
                <div class="sub-category-wrap">
                    <div class="sub-category-title">{{subCategory.title}}</div>
                    <div class="sub-category-text">{{subCategory.text}}</div>
                </div>
            </div>
        </div>
    </div>
</div>

</body>
</html>
